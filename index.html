
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sign-up" class="toc-h2 toc-link" data-title="SIGN UP">SIGN UP</a>
                  </li>
                  <li>
                    <a href="#sign-in" class="toc-h2 toc-link" data-title="SIGN IN">SIGN IN</a>
                  </li>
                  <li>
                    <a href="#sign-out" class="toc-h2 toc-link" data-title="SIGN OUT">SIGN OUT</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user" class="toc-h2 toc-link" data-title="Get User">Get User</a>
                  </li>
                  <li>
                    <a href="#patch-user" class="toc-h2 toc-link" data-title="Patch User">Patch User</a>
                  </li>
                  <li>
                    <a href="#updating-users-password" class="toc-h2 toc-link" data-title="Updating users password">Updating users password</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#test-sessions" class="toc-h1 toc-link" data-title="Test Sessions">Test Sessions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-multiple-test-sessions" class="toc-h2 toc-link" data-title="Get multiple test sessions">Get multiple test sessions</a>
                  </li>
                  <li>
                    <a href="#get-one-test-session" class="toc-h2 toc-link" data-title="Get one test session">Get one test session</a>
                  </li>
                  <li>
                    <a href="#post-test-sessions" class="toc-h2 toc-link" data-title="Post test sessions">Post test sessions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#training-sessions" class="toc-h1 toc-link" data-title="Training sessions">Training sessions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-training-sessions" class="toc-h2 toc-link" data-title="Get Training sessions">Get Training sessions</a>
                  </li>
                  <li>
                    <a href="#get-one-training-session" class="toc-h2 toc-link" data-title="Get one Training session">Get one Training session</a>
                  </li>
                  <li>
                    <a href="#post-training-session" class="toc-h2 toc-link" data-title="Post training session">Post training session</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#performances" class="toc-h1 toc-link" data-title="Performances">Performances</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-performances" class="toc-h2 toc-link" data-title="Get Performances">Get Performances</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#preferred-training" class="toc-h1 toc-link" data-title="Preferred Training">Preferred Training</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-preferred-training" class="toc-h2 toc-link" data-title="Get preferred training">Get preferred training</a>
                  </li>
                  <li>
                    <a href="#patch-preferred-training" class="toc-h2 toc-link" data-title="Patch preferred training">Patch preferred training</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#all-variables-in-each-model" class="toc-h1 toc-link" data-title="All Variables in each model">All Variables in each model</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#user-model" class="toc-h2 toc-link" data-title="User model">User model</a>
                  </li>
                  <li>
                    <a href="#test-session-model" class="toc-h2 toc-link" data-title="Test session model">Test session model</a>
                  </li>
                  <li>
                    <a href="#training-session-model" class="toc-h2 toc-link" data-title="Training session model">Training session model</a>
                  </li>
                  <li>
                    <a href="#performances-model" class="toc-h2 toc-link" data-title="Performances model">Performances model</a>
                  </li>
                  <li>
                    <a href="#preferred-training-model" class="toc-h2 toc-link" data-title="Preferred training model">Preferred training model</a>
                  </li>
                  <li>
                    <a href="#devices-model-not-used" class="toc-h2 toc-link" data-title="Devices model(not used)">Devices model(not used)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#erd-diagram-of-database" class="toc-h1 toc-link" data-title="ERD diagram of database">ERD diagram of database</a>
          </li>
          <li>
            <a href="#active-admin-database-overview" class="toc-h1 toc-link" data-title="Active Admin / Database Overview">Active Admin / Database Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request-15" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#testing" class="toc-h1 toc-link" data-title="Testing">Testing</a>
          </li>
          <li>
            <a href="#how-to-report-a-bug-problem" class="toc-h1 toc-link" data-title="How to report a bug/problem">How to report a bug/problem</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Aerofit API! This API gives access to all Aerofit related endpoints.</p>

<p>On the right side you’ll see code examples. We currently have JSON code samples, showing the formatting of requests and responses.</p>

<p>This is updated as the API is being expanded.</p>

<p>Right now the API is only available internally at Aerofit so don’t share anything from within this documentation with anyone outside Aerofit.</p>

<p>API is primarily coded in ruby on rails. The next development stages will be continuously translated into node.js</p>

<p>Authors of API are Denis Trebula and Rasmus Reiler.</p>
<h1 id='authentication'>Authentication</h1>
<p>The Aerofit API uses authentication for almost all endpoints. The authentication system is in charge of keeping a user logged in, and therefore also for scoping API requests to the users resources.</p>

<p>The authentication system works by using headers. On authenticated endpoints the API requires five headers to be sent with the requests. When the request is processed by the API a timer of five seconds will be set, after which the headers will be invalidated (in development the headers won’t be invalidated)</p>

<p>The API will include new headers on all authenticated responses. The client should use the new headers as the old ones will be invalidated. If the request and response is sent over HTTTPS, this should protect against MITM attacks.</p>

<p>The headers are as follows:</p>

<p>access-token</p>

<p>client</p>

<p>expiry</p>

<p>token-type</p>

<p>uid</p>

<p>Almost all endpoints can therefore return error code 403 Unauthorized.</p>

<p>We’re using the Ruby gem Devise Token Auth as our authentication system. If more information is needed take a look at the linked Github repository.</p>
<h2 id='sign-up'>SIGN UP</h2>
<blockquote>
<p>To Create a new user, you can use following code:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test12345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"password_confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test12345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>The API will respond with 200:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"activity_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-16T08:03:39.384Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-16T08:03:39.620Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_test"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is used to create a new User in the database. This is preferably the first endpoint a user should hit when using the application. The endpoint is currently handled fully by Devise, meaning the application will have to PATCH the user in a later request with more information.</p>

<p>Creating a user with this endpoint successfully also returns the users headers, meaning there’s no need to sign in afterwards.</p>

<p>Assigning user role of a admin will give him more privileges and access to different endpoints for more information.</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>Users name</td>
</tr>
<tr>
<td>email</td>
<td>true</td>
<td>Users email</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>Users password. Minimum 6 characters long, must contains lower case and upper case letter and a number.</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>true</td>
<td>A repetition of the users password</td>
</tr>
<tr>
<td>admin</td>
<td>false</td>
<td>To make user into super user/admin</td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://207.154.254.66/auth</code></p>
<h3 id='errors'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>422: Unprocessable entity</code></p>
<h2 id='sign-in'>SIGN IN</h2>
<blockquote>
<p>Your request should look like following:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test12345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The api will respond with 200:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"activity_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_test"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If a user already exists in the database you must use the sign-in endpoint to retrieve the authentication headers.</p>

<p>Do not forget that the user must use a password which contains:</p>

<p>Must contain 6 or more characters.</p>

<p>Must contain a digit.</p>

<p>Must contain a lower case character.</p>

<p>Must contain an upper case character.</p>

<p>This is important in order to achieve at least basic security measures.</p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>Users email</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>Users password</td>
</tr>
</tbody></table>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://207.154.254.66/auth/sign_in</code></p>
<h3 id='errors-2'>Errors</h3>
<p>If the API call is unsuccessful the following errors can occur</p>

<p><code>401: Unauthorized</code></p>
<h2 id='sign-out'>SIGN OUT</h2>
<p>This endpoint is used to logout a user. The user is found through the request headers.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>DELETE https://207.154.254.66/auth/sign_out</code></p>
<h3 id='errors-3'>Errors</h3>
<p>If the API call is unsuccessful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h1 id='users'>Users</h1>
<p>The User object is the central object in the API. Every user has one. It links every other object together and is used for authorization of resources. It contains information that pertains to that one specific user.</p>

<p>User is linked with Test_sessions, Training_sessions, Performances, Devices.</p>

<p>Allowed methods: Get, Patch</p>

<p>Post for new user is part of registration.</p>
<h2 id='get-user'>Get User</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_doc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"activity_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_test"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"test_sessions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:24:12.694Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avg_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avg_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-12</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"training_sessions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"performance"</span><span class="p">:{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span><span class="s2">"avg_weekly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"1"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
    </span><span class="s2">"avg_monthly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"0"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
    </span><span class="s2">"avg_yearly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.12"</span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"device"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint responds with a user. It also embeds latest TrainingSession, TestSession, Device and Performances object.
The TrainingSession only contains the ID and date so you can show the upcoming training to the use in the application.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://207.154.254.66/users/:id</code></p>

<p><code>GET https://207.154.254.66/users/:email</code></p>

<p>if you want to retrieve users by email, email must be in following format: Instead of test@test.dk   use  test-test-dk</p>

<p>This is due to friendly id library.</p>
<h3 id='errors-4'>Errors</h3>
<p>If the API call is unsuccessful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h3 id='super-user'>Super user</h3>
<p>Super user has in this case access to every user in database just by using mentioned http requests.</p>
<h2 id='patch-user'>Patch User</h2>
<blockquote>
<p>Request should look like following:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patch_test"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Api will respond with</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patch_test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"activity_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_test"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"test_sessions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:24:12.694Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avg_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avg_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-12</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"training_sessions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"performance"</span><span class="p">:{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span><span class="s2">"avg_weekly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"1"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
    </span><span class="s2">"avg_monthly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"0"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
    </span><span class="s2">"avg_yearly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.12"</span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"device"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>false</td>
<td>Email</td>
</tr>
<tr>
<td>password</td>
<td>false</td>
<td>Password</td>
</tr>
<tr>
<td>name</td>
<td>false</td>
<td>Name</td>
</tr>
<tr>
<td>address</td>
<td>false</td>
<td>The users address</td>
</tr>
<tr>
<td>country</td>
<td>false</td>
<td>The country the user is living in</td>
</tr>
<tr>
<td>age</td>
<td>false</td>
<td>Age of the user. Defaults to -1</td>
</tr>
<tr>
<td>activity_level</td>
<td>false</td>
<td>How active the user is. From 0-3</td>
</tr>
<tr>
<td>admin</td>
<td>false</td>
<td>If you want to make user into admin or super user</td>
</tr>
<tr>
<td>gender</td>
<td>true</td>
<td>gender of the user, cannot be blank if you want to update it</td>
</tr>
<tr>
<td>birthday</td>
<td>true</td>
<td>birthday of the user, cannot be blank if you want to update it</td>
</tr>
<tr>
<td>height</td>
<td>true</td>
<td>height of the user, cannot be blank if you want to update it</td>
</tr>
<tr>
<td>weight</td>
<td>false</td>
<td>If you want to make user into admin or super user</td>
</tr>
<tr>
<td>device_token</td>
<td>false</td>
<td>If you want to make user into admin or super user</td>
</tr>
</tbody></table>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>PATCH https://207.154.254.66/user/:id</code></p>

<p><code>PATCH https://207.154.254.66/user/:email</code></p>

<p>Take in mind that email must be in format test-test-dk</p>
<h3 id='errors-5'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>422: Unprocessable entity</code></p>
<h2 id='updating-users-password'>Updating users password</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"password_confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test123456"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Api will respond with:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patch_test"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"activity_level"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.dk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-16T08:03:39.384Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-16T09:11:28.119Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_test"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your password has been successfully updated."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is used to change a users password. The user is found through the headers sent with the request.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>true</td>
<td>New password</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>true</td>
<td>Repeat of new password</td>
</tr>
</tbody></table>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>PUT https://207.154.254.66/auth/password</code></p>
<h3 id='errors-6'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>422: Unprocessable entity</code></p>
<h1 id='test-sessions'>Test Sessions</h1>
<p>TestSession objects are model representatives of the tests the
 will have to take during the course of his training. It is from these that the application will base the users training.</p>

<p>User can have multiple Test sessions but only the latest one will be used for calculations if user decides to create new Training session.</p>

<p>Allowed methods : Get, Post , Patch</p>
<h2 id='get-multiple-test-sessions'>Get multiple test sessions</h2>
<blockquote>
<p>Api will respond with:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:29:56.422Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:29:32.564Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:24:12.694Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>1 page is 20 TrainingSessions.</p>

<p>You can GET a specific TestSession afterwards to get more information about it specifically.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>?page=1</td>
<td>false</td>
<td>Which page to fetch. Defaults to page 1</td>
</tr>
</tbody></table>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://207.154.254.66/users/:id/test_sessions</code></p>
<h3 id='errors-7'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h3 id='super-user-2'>Super user</h3>
<p>Super users have endpoints slightly different because they can access not only their test sessions but every test session possible.</p>

<p><code>GET https://207.154.254.66/users/:adminId/test_sessions/:idOfAnyUser</code></p>

<p>:adminId can be either id of the admin user or he email.</p>

<p>If admin wants to access his own test sessions, he should do it with this same url but with his Id/email used at the end as well.</p>
<h2 id='get-one-test-session'>Get one test session</h2>
<blockquote>
<p>The api will respond with :</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"avg_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"avg_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rec_graph_func"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-14T12:29:56.422Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets one (1) specific TestSession. This is done after the above request to get more information for a certain TestSession.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET https://207.154.254.66/users/:user_id/test_sessions/:id</code></p>
<h3 id='errors-8'>Errors</h3>
<p>If the API call is unsuccessful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h3 id='super-user-3'>Super user</h3>
<p>Super user can access any test session but the end point looks like this</p>

<p><code>GET https://207.154.254.66/users/:adminId/test_sessions/:idOfAnyUser/specific_test_session/:id</code></p>

<p>The last :id represents the id of specific test session which super user wish to retrieve.</p>

<p>Also instead of :adminId and :idOfAnyUser you can use emails but Id is more preferable.</p>
<h2 id='post-test-sessions'>Post test sessions</h2>
<blockquote>
<p>Request should look like following:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"avg_exp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"avg_insp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The respond will look like following :</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"peak_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"peak_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avg_exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avg_insp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rec_graph_func"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-17T08:48:12.171Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-17T08:48:12.171Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>ID of the user</td>
</tr>
<tr>
<td>date</td>
<td>false</td>
<td>Date when the training was completed</td>
</tr>
<tr>
<td>peak_exp</td>
<td>false</td>
<td>Peak expiratory</td>
</tr>
<tr>
<td>peak_insp</td>
<td>false</td>
<td>Peak inspiratory</td>
</tr>
<tr>
<td>avg_exp</td>
<td>false</td>
<td>Average expiratory</td>
</tr>
<tr>
<td>avg_insp</td>
<td>false</td>
<td>Average inspiratory</td>
</tr>
</tbody></table>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST https://207.154.254.66/users/:user_id/test_sessions</code></p>
<h3 id='errors-9'>Errors</h3>
<p>If the API call is unsuccessful the following errors can occur</p>

<p><code>422: Unprocessable entity</code></p>
<h1 id='training-sessions'>Training sessions</h1>
<p>TrainingSession objects are created by user, and can be created only if the user completes TestSession. This should be verified in the front end.
Posting a new Training session will will generate a training with our super secret formula.</p>

<p>Allowed methods : Get , Post</p>
<h2 id='get-training-sessions'>Get Training sessions</h2>
<blockquote>
<p>The api will respond with</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
        </span><span class="s2">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"test_id"</span><span class="p">:</span><span class="s2">"7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"evaluation_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"performed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"graph_func"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
            </span><span class="mf">-0.4</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"test_id"</span><span class="p">:</span><span class="s2">"7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"evaluation_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"performed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"graph_func"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
            </span><span class="mf">-0.4</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint gets 1 page of TrainingSessions. The first index in the response will always be the latest TrainingSession (usually one that the user hasn’t completed yet).</p>

<p>1 page is 20 TrainingSessions.</p>

<p>You can GET a specific TrainingSession afterwards to get more information about it specifically.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>?page=1</td>
<td>false</td>
<td>Which page to fetch. Defaults to page 1</td>
</tr>
</tbody></table>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://207.154.254.66/users/:id/training_sessions</code></p>
<h3 id='errors-10'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h3 id='super-user-4'>Super user</h3>
<p>Same as with test_sessions</p>

<p><code>GET https://207.154.254.66/users/:adminId/training_sessions/:idOfAnyUser</code></p>

<p>For more information you can look at the Super User/Admin cards in Trello</p>
<h2 id='get-one-training-session'>Get one Training session</h2>
<blockquote>
<p>The Api will respond with:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"test_id"</span><span class="p">:</span><span class="s2">"7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exp_hole_setting"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"insp_hole_setting"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_func"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
        </span><span class="mf">-0.4</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"test_id"</span><span class="p">:</span><span class="s2">"7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"evaluation_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"performed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cal_lung_capacity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets one (1) specific TrainingSession. This is done after the above request to get more information for a certain TrainingSession.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET https://207.154.254.66/users/:training_id/training_sessions/:id</code></p>
<h3 id='errors-11'>Errors</h3>
<p>If the API call is unsuccesful the following errors can occur</p>

<p><code>404: Not found</code></p>
<h3 id='super-user-5'>Super user</h3>
<p>Same as with Test session</p>

<p><code>GET https://207.154.254.66/users/:adminId/training_sessions/:idOfAnyUser/specific_training_session/:id</code></p>

<p>For more information you can look at the Super User/Admin cards in Trello</p>
<h2 id='post-training-session'>Post training session</h2>
<blockquote>
<p>The post request can look like following:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"training"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"exp_hole_setting"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"insp_hole_setting"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_func"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
        </span><span class="mf">-0.4</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">12389429</span><span class="p">,</span><span class="w">
    </span><span class="s2">"evaluation_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"performed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cal_lung_capacity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Training session contains the latest/newest Test Session Id based on which we do some calculations.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST https://207.154.254.66/users/:user_id/training_sessions</code></p>
<h1 id='performances'>Performances</h1>
<p>We collect statistics about user from his training session if the training session is completed and based on the values we calculate
his weekly, monthly and yearly performance.</p>

<p>Values are calculated and saved after posting new Training session. Creating of Training session goes in following steps : 7
Create training session from test, update mentioned training session with &quot;Post&quot; method attributes. Therefore we use method
after_update for calculating Performances.</p>

<p>Performances are collected automatically in the API and are stored in the form of hash values.</p>
<h2 id='get-performances'>Get Performances</h2>
<blockquote>
<p>The api will respond with:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span><span class="s2">"avg_weekly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"1"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
</span><span class="s2">"avg_monthly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"0"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}},</span><span class="w">
</span><span class="s2">"avg_yearly"</span><span class="p">:{</span><span class="s2">"start_date"</span><span class="p">:</span><span class="s2">"2018-01-10T17:42:17.127Z"</span><span class="p">,</span><span class="s2">"0"</span><span class="p">:{</span><span class="s2">"avg_evaluation"</span><span class="p">:</span><span class="mf">5.4</span><span class="p">,</span><span class="s2">"num_entries"</span><span class="p">:</span><span class="mi">5</span><span class="p">}}}</span><span class="w">
</span></code></pre>
<p>The API will respond with the id of performance, their starting date, average evaluation, number of entries and the number of which month/week/year it is in. If it is first Week or second or third etc.</p>

<p>All the following calculations must be done in the front end of the application.</p>
<h1 id='preferred-training'>Preferred Training</h1>
<p>Each user has one assigned row in the table preferred training which symbolizes its preferred training.</p>

<p>Preferred training is created and set by default on the user registration, therefore old user registered before this change will not have this option.</p>
<h2 id='get-preferred-training'>Get preferred training</h2>
<p>In order to retrieve preferred training, you can use GET endpoint below</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>Get https://207.154.254.66/users/:user_id/preferred_training</code></p>
<h3 id='super-user-6'>Super user</h3>
<p>Same as with other models</p>

<p><code>GET https://207.154.254.66/users/:adminId/preferred_training/:idOfDesiredUser</code></p>

<p>The api will respond with id, program, level, daily session</p>

<blockquote>
<p>The api will respond with:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">"program"</span><span class="p">:</span><span class="s2">"hard"</span><span class="p">,</span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"hard"</span><span class="p">,</span><span class="s2">"daily_session"</span><span class="p">:</span><span class="s2">"hard"</span><span class="p">,</span><span class="s2">"user_id"</span><span class="p">:</span><span class="mi">66</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='patch-preferred-training'>Patch preferred training</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"preferred_training"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"daily_session"</span><span class="p">:</span><span class="w"> </span><span class="s2">"random"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-14'>HTTP Request</h3>
<p><code>Patch https://207.154.254.66/users/:user_id/preferred_training/:id</code></p>
<h1 id='all-variables-in-each-model'>All Variables in each model</h1>
<p>This section contains basically all the values which you can use/see/get from specific models in database.</p>
<h2 id='user-model'>User model</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>true</td>
<td>string</td>
<td>name of the provider e.g. facebook/gmail, currently not used.</td>
</tr>
<tr>
<td>uid</td>
<td>true</td>
<td>string</td>
<td>id of user</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>string</td>
<td>users password</td>
</tr>
<tr>
<td>name</td>
<td>false</td>
<td>false</td>
<td>users name</td>
</tr>
<tr>
<td>email</td>
<td>false</td>
<td>false</td>
<td>users email</td>
</tr>
<tr>
<td>address</td>
<td>false</td>
<td>string</td>
<td>users address</td>
</tr>
<tr>
<td>country</td>
<td>false</td>
<td>string</td>
<td>users country of origin</td>
</tr>
<tr>
<td>age</td>
<td>false</td>
<td>integer</td>
<td>users age</td>
</tr>
<tr>
<td>activity_level</td>
<td>false</td>
<td>integer</td>
<td>activity level of user, default 0</td>
</tr>
<tr>
<td>weight</td>
<td>false</td>
<td>integer</td>
<td>users weight</td>
</tr>
<tr>
<td>height</td>
<td>false</td>
<td>integer</td>
<td>users height</td>
</tr>
<tr>
<td>birthday</td>
<td>false</td>
<td>string</td>
<td>users birthday</td>
</tr>
<tr>
<td>profile_picture</td>
<td>false</td>
<td>string</td>
<td>coded profile picture into string, currently not used.</td>
</tr>
<tr>
<td>gender</td>
<td>false</td>
<td>string</td>
<td>users gender</td>
</tr>
<tr>
<td>nickname</td>
<td>false</td>
<td>string</td>
<td>users nickname</td>
</tr>
<tr>
<td>admin</td>
<td>false</td>
<td>boolean</td>
<td>if is user admin/super user or not</td>
</tr>
<tr>
<td>slug</td>
<td>false</td>
<td>string</td>
<td>slugged version of email e.g. (test-test-dk)</td>
</tr>
<tr>
<td>device_token</td>
<td>false</td>
<td>string</td>
<td>token for the device that user uses</td>
</tr>
</tbody></table>
<h2 id='test-session-model'>Test session model</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>integer</td>
<td>users id</td>
</tr>
<tr>
<td>peak_exp</td>
<td>false</td>
<td>float</td>
<td>expiratory peak</td>
</tr>
<tr>
<td>peak_insp</td>
<td>false</td>
<td>float</td>
<td>inspiratory peak</td>
</tr>
<tr>
<td>avg_exp</td>
<td>false</td>
<td>float</td>
<td>average expiratory</td>
</tr>
<tr>
<td>avg_insp</td>
<td>false</td>
<td>float</td>
<td>average inspiratory</td>
</tr>
<tr>
<td>rec_graph_func</td>
<td>false</td>
<td>string</td>
<td>graph function</td>
</tr>
</tbody></table>
<h2 id='training-session-model'>Training session model</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>integer</td>
<td>users id</td>
</tr>
<tr>
<td>evaluation_score</td>
<td>false</td>
<td>float</td>
<td>evaluated score</td>
</tr>
<tr>
<td>length</td>
<td>false</td>
<td>integer</td>
<td>length of the training</td>
</tr>
<tr>
<td>difficulty_reduction</td>
<td>false</td>
<td>string</td>
<td>reduction of dificulty</td>
</tr>
<tr>
<td>performed</td>
<td>false</td>
<td>boolean</td>
<td>if user performed training(Not necessary to use)</td>
</tr>
<tr>
<td>cal_lung_capacity</td>
<td>false</td>
<td>string</td>
<td>lung capacity</td>
</tr>
<tr>
<td>exp</td>
<td>false</td>
<td>decimal</td>
<td>expiratory</td>
</tr>
<tr>
<td>insp</td>
<td>false</td>
<td>decimal</td>
<td>inspiratory</td>
</tr>
<tr>
<td>avg_cycle</td>
<td>false</td>
<td>string</td>
<td>average cycle</td>
</tr>
<tr>
<td>test_peak_exp</td>
<td>false</td>
<td>integer</td>
<td>peak expiratory from test session</td>
</tr>
<tr>
<td>test_peak_insp</td>
<td>false</td>
<td>integer</td>
<td>peak inspiratory from test session</td>
</tr>
<tr>
<td>graph_static_values</td>
<td>false</td>
<td>string</td>
<td>graph  values</td>
</tr>
<tr>
<td>test_id</td>
<td>false</td>
<td>integer</td>
<td>id of test session from which training is created</td>
</tr>
<tr>
<td>program</td>
<td>false</td>
<td>string</td>
<td>program that user is currently using for training</td>
</tr>
<tr>
<td>level</td>
<td>false</td>
<td>string</td>
<td>level  that user is currently using</td>
</tr>
</tbody></table>
<h2 id='performances-model'>Performances model</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>integer</td>
<td>users id</td>
</tr>
<tr>
<td>avg_weekly</td>
<td>false</td>
<td>string</td>
<td>Average performance values separated by weeks</td>
</tr>
<tr>
<td>avg_monthly</td>
<td>false</td>
<td>string</td>
<td>Average performance values separated by months</td>
</tr>
<tr>
<td>avg_yearly</td>
<td>false</td>
<td>string</td>
<td>Average performance values separated by years</td>
</tr>
<tr>
<td>created_at</td>
<td>true</td>
<td>datetime</td>
<td>creation date</td>
</tr>
<tr>
<td>updated_at</td>
<td>true</td>
<td>datetime</td>
<td>update date</td>
</tr>
</tbody></table>
<h2 id='preferred-training-model'>Preferred training model</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>integer</td>
<td>users id</td>
</tr>
<tr>
<td>program</td>
<td>false</td>
<td>string</td>
<td>program that user is currently using for training</td>
</tr>
<tr>
<td>daily_session</td>
<td>false</td>
<td>string</td>
<td>daily session for user</td>
</tr>
<tr>
<td>level</td>
<td>false</td>
<td>string</td>
<td>level that user is currently using</td>
</tr>
</tbody></table>
<h2 id='devices-model-not-used'>Devices model(not used)</h2>
<table><thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_id</td>
<td>true</td>
<td>string</td>
<td>devices id</td>
</tr>
<tr>
<td>activation_date</td>
<td>datetime</td>
<td>string</td>
<td>Date of activation</td>
</tr>
<tr>
<td>created_at</td>
<td>true</td>
<td>datetime</td>
<td>Date of creation</td>
</tr>
<tr>
<td>updated_at</td>
<td>true</td>
<td>datetime</td>
<td>Date of last update</td>
</tr>
<tr>
<td>user_id</td>
<td>false</td>
<td>integer</td>
<td>users id</td>
</tr>
</tbody></table>
<h1 id='erd-diagram-of-database'>ERD diagram of database</h1>
<p>Models AdminUser and Active Admin::Comment are not currently in use since they are part of ActiveAdmin and therefore are used only for viewing and updating mode in database.</p>

<p>Do not confuse AdminUser with super user / admin privileges. For mentioned privileges there is a field in User table called <code>admin</code></p>

<p><a href="https://drive.google.com/open?id=1Uqip1hhOpTRkyJMrOJLEorWx6fT-llEm">Erd diagram</a></p>
<h1 id='active-admin-database-overview'>Active Admin / Database Overview</h1>
<p>In order to access the database, to see the tables and variables, you must have admin account created by either system admin(Denis) or other users who have privileges to do so.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>https://207.154.254.66/admin/login</code></p>

<p>or</p>

<p><code>https://api.aerofit.dk/admin/login</code></p>
<h1 id='testing'>Testing</h1>
<p>All of the backend testing before releasing code to the live server is done in Postman.  In order to test changes correctly</p>

<p>Write &quot;rails s&quot; to start the server and test your changes in postman.  </p>

<p>When you log in as user, you will receive 4  headers / tokens, access-token, uid, client, expiry, token-type. Copy these and past them into headers in bulk edit.</p>

<p>After this, you will be able to test anything.</p>

<p><a href="https://drive.google.com/open?id=15-SkFhIus0Nkb2Pe7nIw_tMkuZ4VVyA6">Receiving tokens</a></p>

<p><a href="https://drive.google.com/open?id=1hqRzFDMrjiEuZn66PbZgi-hL0dfA1_W_">Passing tokens into headers</a></p>
<h1 id='how-to-report-a-bug-problem'>How to report a bug/problem</h1>
<p>If you find a bug regarding backend, communication with database, live server or anything else, first follow these steps:</p>

<p>Answer these questions:</p>

<p>1, What problem do I have ?</p>

<p>2, What causes this problem ?</p>

<p>3, What are the possible variants to resolve the problem ?</p>

<p>4, What solution do I propose ?</p>

<p>Only and only after answering these questions report this bug to system admin or backend developer in the channel #backend on Slack.</p>
<h1 id='errors'>Errors</h1>
<p>I’ve chosen not to list HTTP response codes here as they can be looked up on Google.
I’ve included all our own specialized error messages that you might meet when using our API.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
